/**
 * videojs-overlay
 * @version 2.0.0
 * @copyright 2017 Brightcove, Inc.
 * @license Apache-2.0
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):t.videojsOverlay=e(t.videojs)}(this,function(t){"use strict";t="default"in t?t.default:t;var e,n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=e="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},a={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},h=t.getComponent("Component"),d=t.dom||t,u=t.registerPlugin||t.plugin,l=function(t){return"number"==typeof t&&t===t},p=function(t){return"string"==typeof t&&/^\S+$/.test(t)},f=function(e){function n(t,o){i(this,n);var r=s(this,e.call(this,t,o));return["start","end"].forEach(function(t){var e=r.options_[t];if(l(e))r[t+"Event_"]="timeupdate";else if(p(e))r[t+"Event_"]=e;else if("start"===t)throw new Error('invalid "start" option; expected number or string')}),["endListener_","rewindListener_","startListener_"].forEach(function(t){r[t]=function(e){return n.prototype[t].call(r,e)}}),"timeupdate"===r.startEvent_&&r.on(t,"timeupdate",r.rewindListener_),r.debug('created, listening to "'+r.startEvent_+'" for "start" and "'+(r.endEvent_||"nothing")+'" for "end"'),r.hide(),r}return r(n,e),n.prototype.createEl=function(){var t=this.options_,e=t.content,n=t.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",i=d.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+t.align+"\n        "+t.class+"\n        "+n+"\n        vjs-hidden\n      "});return"string"==typeof e?i.innerHTML=e:e instanceof o.DocumentFragment?i.appendChild(e):d.appendContent(i,e),i},n.prototype.debug=function(){if(this.options_.debug){for(var e=t.log,n=e,o=arguments.length,i=Array(o),r=0;r<o;r++)i[r]=arguments[r];e.hasOwnProperty(i[0])&&"function"==typeof e[i[0]]&&(n=e[i.shift()]),n.apply(void 0,["overlay#"+this.id()+": "].concat(i))}},n.prototype.hide=function(){return e.prototype.hide.call(this),this.debug("hidden"),this.debug('bound `startListener_` to "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this},n.prototype.shouldHide_=function(t,e){var n=this.options_.end;return l(n)?t>=n:n===e},n.prototype.show=function(){return e.prototype.show.call(this),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug('unbound `startListener_` from "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_)),this},n.prototype.shouldShow_=function(t,e){var n=this.options_.start,o=this.options_.end;return l(n)?l(o)?t>=n&&t<o:this.hasShownSinceSeek_?Math.floor(t)===n:(this.hasShownSinceSeek_=!0,t>=n):n===e},n.prototype.startListener_=function(t){var e=this.player().currentTime();this.shouldShow_(e,t.type)&&this.show()},n.prototype.endListener_=function(t){var e=this.player().currentTime();this.shouldHide_(e,t.type)&&this.hide()},n.prototype.rewindListener_=function(t){var e=this.player().currentTime(),n=this.previousTime_,o=this.options_.start,i=this.options_.end;e<n&&(this.debug("rewind detected"),l(i)&&!this.shouldShow_(e)?(this.debug("hiding; "+i+" is an integer and overlay should not show at this time"),this.hasShownSinceSeek_=!1,this.hide()):p(i)&&e<o&&(this.debug("hiding; show point ("+o+") is before now ("+e+") and end point ("+i+") is an event"),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=e},n}(h);t.registerComponent("Overlay",f);var c=function(e){var n=this,o=t.mergeOptions(a,e);Array.isArray(this.overlays_)&&this.overlays_.forEach(function(t){n.removeChild(t),n.controlBar&&n.controlBar.removeChild(t),t.dispose()});var i=o.overlays;delete o.overlays,this.overlays_=i.map(function(e){var i=t.mergeOptions(o,e);return i.attachToControlBar&&n.controlBar&&-1!==i.align.indexOf("bottom")?n.controlBar.addChild("overlay",i):n.addChild("overlay",i)})};return c.VERSION="__VERSION__",u("overlay",c),c});